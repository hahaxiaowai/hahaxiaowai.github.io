(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{613:function(t,a,s){"use strict";s.r(a);var r=s(6),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"简述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简述"}},[t._v("#")]),t._v(" 简述")]),t._v(" "),s("p",[t._v("本文适合初次尝试使用Mapbox或GIS地图库的前端开发者，如果你是一名准备入行GIS或者在校GIS专业学生，可以通过此文章了解Mapbox。")]),t._v(" "),s("p",[t._v("如果你是一名前端开发者，遇到相关的需求，并且需求不复杂的话，那么我推荐使用高德与百度进行开发。")]),t._v(" "),s("p",[t._v("入门系列目的是让你能够达到“对API”开发的程度。")]),t._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("mapbox-gl是一款优秀的开源GIS开源库，区别于Cesium，它具有三维的表现能力，又不能算真正的三维地图(非球体)，介于二维与三维之间，它与我们所熟知的百度高德地图非常相似，由于它优秀的加载速度和可扩展性，以及创新性的矢量瓦片(一种数据格式)，令它成为非常流行的开源GIS框架。")]),t._v(" "),s("h2",{attrs:{id:"为什么选择mapbox"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择mapbox"}},[t._v("#")]),t._v(" 为什么选择Mapbox")]),t._v(" "),s("ol",[s("li",[t._v("如果你只是想在自己的项目中使用地图简单的展示一些地理位置信息，并实现简单的交互效果，你可以选择它。")]),t._v(" "),s("li",[t._v("如果项目要求使用开源库，并且自己需要展示的不是特大场景的数据（全国或全球范围即特大场景，或不涉及以球的形式展示），你可以选择Mapbox")]),t._v(" "),s("li",[t._v("它对矢量瓦片的支持是最好的。")])]),t._v(" "),s("h2",{attrs:{id:"代码逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码逻辑"}},[t._v("#")]),t._v(" 代码逻辑")]),t._v(" "),s("center",[s("kbd",[s("font",{attrs:{color:"$specialFontColor"}},[t._v("数据源（Source）")])],1),t._v("---\x3e"),s("kbd",[s("font",{attrs:{color:"$specialFontColor"}},[t._v("图层（Layer)")])],1),t._v("---\x3e"),s("kbd",[s("font",{attrs:{color:"$specialFontColor"}},[t._v("地图（Map)")])],1)]),s("br"),t._v("\n在实际去写代码前，还需了解地图加载逻辑，这里所说的逻辑指的是代码书写逻辑，而非真正的渲染逻辑。简单来讲，假如你手里有一些拥有全国污染情况的数据，你将这些数据托管在数据源（Source）中，以不同类型的污染源分成多个图层（Layer），设置图层的样式，最后加载至地图（Map)上便完成了数据的展示。\n"),s("p",[t._v("如果上面的结构图不够理解，没关系，在接下来的实践中，便会渐渐明白这个过程。\n这一步实际上便完成了对地图开发的一半了，而剩下的，便剩下交互和扩展效果了。")]),t._v(" "),s("h2",{attrs:{id:"初始化地图实例-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化地图实例-配置"}},[t._v("#")]),t._v(" 初始化地图实例（配置)")]),t._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm install "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("save mapbox"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("gl\n")])])]),s("h3",{attrs:{id:"引入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入"}},[t._v("#")]),t._v(" 引入")]),t._v(" "),s("p",[t._v("css文件也可以通过import引入")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" mapboxgl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mapbox-gl'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),s("h3",{attrs:{id:"创建地图容器并初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建地图容器并初始化"}},[t._v("#")]),t._v(" 创建地图容器并初始化")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 创建一个地图容器，写上id,可以设置一下div的宽高 --\x3e")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  官网注册登录后，可免费申请")]),t._v("\nmapBox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  地图基本配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MapConfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("container")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'map'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// div 名称")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mapbox://styles/mapbox/streets-v11'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 底图Url")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("center")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("74.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 地图初始化后的定位位置")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("zoom")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化后地图缩放等级")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" map "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("mapBox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MapConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://docs.mapbox.com/mapbox-gl-js/api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方初始化示例"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("这样我们便完成了地图的初始化")]),t._v(" "),s("h3",{attrs:{id:"特别说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特别说明"}},[t._v("#")]),t._v(" 特别说明")]),t._v(" "),s("p",[t._v("mapbox现已经更新至v2.0，mapbox从最一开始的卖服务，卖定制，又有了一个新的商业模式——地图实例收费。上面的mapbox初始化示例中，有一个accessToken需要配置，而这个需要开发者去官网免费申请。所谓的地图实例收费，便是通过这个token请求次数获取你地图实例化（初始化）的次数，从而根据次数收费。有些人会认为这算什么开源框架啊，还收费，首先，开源不等于免费，尤其是2.0后，mapbox更换开源许可后，切莫不要更改关于token验证的源代码。")]),t._v(" "),s("p",[t._v("对于学习者来说，我们不需要担心这些变化，而对于商业化用途的开发来说，这得分两种情况来说明，首先，如果你的月使用量非常小，那仍是免费的，他按照次数收费，但也是在超过一定量级才会收费，而对于浏览量非常大的公司来说，可以考虑不同项目申请多个token避免量级过多，如果仍过多，相信公司的体量也不会在意这些。")]),t._v(" "),s("p",[t._v("在这里多说一下开源库收费的事情，程序员做开源一部分原因自然是开源精神的体现，但如果开源能够带来收入只会更好，开源需要热情，更需要物质层面的支撑，这样才能让开源者投入更多的精力在开源仓库中，总不能又让马儿跑，又不让马吃饱吧，像mapbox这样做到一定程度的开源库，一定会考虑新的商业模式，要吃饭的嘛。mapbox这种收费模式和ue引擎收费方式相似，也是公司体量到达一定程度才会收费，这就是所谓的有钱大家赚吧。")])],1)}),[],!1,null,null,null);a.default=e.exports}}]);